YUI.add("flickr-tags-getListPhoto-fetcher",function(e){"use strict";function t(t,n,r){var i=t[0],s=t[1],o=t[2],u=i.photo&&i.photo.tags&&typeof i.photo.tags.tag!="undefined"?i.photo.tags.tag.length:0,a=[];return u>0&&e.Array.each(i.photo.tags.tag,function(e){e.machineTag===0&&typeof e.content=="string"&&(o.exists(e.id)||o.add({id:e.id,tagRaw:e.raw,tagValue:r.isFlipped("tags-charm")?e.content:e.content.replace(/\s/g,""),tagAuthorNSID:e.author}),a.push(o.proxy(e.id)))}),s.exists(n)?s.setValue(n,"tags",a):s.add({id:n,tags:a}),s.proxy(n)}function n(t,n){var r=t.id,i={photo_id:r},s=this;return e.batch(n.callAPI("flickr.tags.getListPhoto",i),n.getModelRegistry("photo-tags-models"),n.getModelRegistry("tag-models")).then(function(e){return s._processResponse(e,r,n.flipper)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-tags-getListPhoto-fetcher] failed getting or processing API response:",e),e})}e.namespace("ModelFetchers")["flickr-tags-getListPhoto"]={run:n,_processResponse:t}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["tag-models","photo-tags-models"]});
YUI.add("flickr-photos-addTags-creator",function(e){"use strict";function t(e){e.tags=e.tags||[];var t={};return t.photo_id=e.photoId,t.tags=e.tags,t}function n(e,t){var n=e[0],r=e[1],i=e[2],s=[];return n.tags.tag.forEach(function(e){i.exists(e.id)||i.add({id:e.id,tagRaw:e.raw,tagValue:e.content.replace(/\s/g,""),tagAuthorNSID:e.author}),s.push(i.proxy(e.id))}),r.exists(t.photoId)?s.forEach(function(e){r.getValue(t.photoId,"tags").appendToList(e)}):r.add({id:t.photoId,tags:s}),s}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photos.addTags",this._processParams(t)),n.getModelRegistry("photo-tags-models"),n.getModelRegistry("tag-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photos-addTags-creator] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photos-addTags"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise"],optional:["photo-tags-models","tag-models"]});
YUI.add("flickr-photosets-addPhoto-creator",function(e){"use strict";function t(t,n){var r={};return r.photo_id=t.photoID,r.photoset_id=t.setID,e.batch(n.callAPI("flickr.photosets.addPhoto",r),n.getModel("set-models",t.setID),n.getModel("photo-models",t.photoID)).then(function(e){var t=e[0],n=e[1],r=e[2];if(t.stat==="ok")return n.addPhoto(r),n},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-addPhoto-creator] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photosets-addPhoto"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-photosets-removePhoto-deletor",function(e){"use strict";function t(t,n){var r={};return r.photo_id=t.photoID,r.photoset_id=t.setID,e.batch(n.callAPI("flickr.photosets.removePhoto",r),n.getModel("set-models",t.setID),n.getModel("photo-models",t.photoID)).then(function(e){var t=e[0],n=e[1],r=e[2];if(t.stat==="ok")return n.removePhoto(r),n},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-removePhoto-deletor] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photosets-removePhoto"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-photosets-create-creator",function(e){"use strict";function t(t,n){var r={};return r.title=t.title,r.description=t.description,r.primary_photo_id=t.photoID,r.full_result=1,e.batch(n.callAPI("flickr.photosets.create",r),n.getModelRegistry("set-models"),n.getModel("photo-models",t.photoID),n.getModel("person-models",n.getViewer().nsid),n.getModel("sets-models",n.getViewer().nsid)).then(function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o;return t.photoset.id?(o=n.add({id:t.photoset.id,title:t.photoset.title.content,description:t.photoset.description.content,photoPageList:[r],photoContextList:[r],owner:i,url:t.photoset.url,primary:{m:t.photoset.primary_photo_extras.urlM,s:t.photoset.primary_photo_extras.urlS,sq:t.photoset.primary_photo_extras.urlSq,t:t.photoset.primary_photo_extras.urlT}}),s.getValue("sets").prependToList(o),o):!1},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-create-creator] failed getting or processing API response:",e),e})}e.namespace("ModelCreators")["flickr-photosets-create"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("set-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photosets-getPhotos"].run(t,this.appContext)},create:function(t,n){return e.ModelCreators["flickr-photosets-create"].run(t,n)},addPhoto:function(t,n){return e.ModelCreators["flickr-photosets-addPhoto"].run(t,n)},removePhoto:function(t,n){return e.ModelCreators["flickr-photosets-removePhoto"].run(t,n)}},addPhoto:function(e,t){return this.getValue(e,"photoPageList").hasMaxBoundary()&&this.getValue(e,"photoPageList").appendToList(t),this.getValue(e,"photoContextList").hasMaxBoundary()&&this.getValue(e,"photoContextList").appendToList(t),this},removePhoto:function(e,t){return this.getValue(e,"photoPageList").removeFromList(t.getValue("id")),this.getValue(e,"photoContextList").removeFromList(t.getValue("id")),this},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"set"}},title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},owner:{isModel:!0},photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photosets-getPhotos"]}},photoContextList:{isCollection:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photosets-getContext"],listItemIdField:"photoId"}},primary:{},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/sets/"+e:undefined}},urlSuffix:{readOnly:!0,defaultFn:function(e){return"set-"+e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photosets-addPhoto-creator","flickr-photosets-removePhoto-deletor","flickr-photosets-getPhotos-fetcher","flickr-photosets-getContext-fetcher","flickr-photosets-create-creator"]});
YUI.add("flickr-photosets-getPhotos-fetcher",function(e){"use strict";function t(t){t.page=t.page||1,t.perPage=t.perPage||100;var n={photoset_id:t.id,extras:e.APIHelper.request.getStandardExtras(),per_page:t.perPage,page:t.page,get_user_info:1};return n}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u={id:n.id,title:r.photoset.title,photoList:[]},a,f,l=[],c=!1,h=!1;return u.owner=e.APIHelper.response.parsePerson(r.user),s.exists(u.owner.id)||s.add(u.owner),u.owner=s.proxy(u.owner.id),o.exists(n.id)&&(a=o.getValue(n.id,"photoPageList"),c=a.hasMinBoundary?a.hasMinBoundary():!1,h=a.hasMaxBoundary?a.hasMaxBoundary():!1,l=a.getList()),f=e.APIHelper.response.parsePhotos({photos:r.photoset.photo,ownerID:r.photoset.owner,personModelRegistry:s,photoModelRegistry:i}),u.photoPageList=e.APIHelper.response.addOrReplaceListByPage({current:l,perPage:n.perPage,pageNum:n.page,hasMax:h,hasMin:c,totalItems:r.photoset.total,newPages:f}),u.photoList.length&&(u.primary=r.photoset.primary),o.exists(u.id)?o.setValue(n.id,"photoPageList",u.photoPageList):o.add(u),f}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photosets.getPhotos",this._processParams(t)),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models"),n.getModelRegistry("set-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-getPhotos-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photosets-getPhotos"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models","person-models","set-models"]});
YUI.add("flickr-photosets-getContext-fetcher",function(e){"use strict";function t(t,n){var r={photoset_id:t.id,extras:e.APIHelper.request.getStandardExtras(),photo_id:t.photoId,num_prev:t.numPrev,num_next:t.numNext,get_photoset_info:1};return r}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a=[],f=s.proxy(n.photoId),l,c,h,p,d,v,m=[];return l=r.prevphotos,c=r.nextphotos,a=e.APIHelper.response.parsePhotos({photos:l.photo,personModelRegistry:o,photoModelRegistry:s}),u=e.APIHelper.response.parsePhotos({photos:c.photo,personModelRegistry:o,photoModelRegistry:s}),d=i.getValue(n.id,"photoContextList"),h=d.hasMinBoundary?d.hasMinBoundary():!1,p=d.hasMaxBoundary?d.hasMaxBoundary():!1,v=d.getList(),m=e.APIHelper.response.addOrReplaceListByContext({model:f,next:a,prev:u.reverse(),current:v,hasMin:h,hasMax:p,numNext:n.numNext,numPrev:n.numPrev}),i.setValue(n.id,"photoContextList",m),{next:a,previous:u.reverse()}}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photosets.getContext",this._processParams(t,n)),n.getModelRegistry("set-models"),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photosets-getContext-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photosets-getContext"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["set-models","photo-models"]});
YUI.add("photostream-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-people-getPhotos"].run(t,this.appContext)}},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"photostream"}},title:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.appContext.getViewer(),n;return t&&t.nsid===e?"Your photostream":(n=this.getValue(e,"owner"),n?n.getValue("displayname")+"'s photostream":"Photostream")}},owner:{isModel:!0},photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getPhotos"]}},photoContextList:{isCollection:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photos-getContext"],listItemIdField:"photoId"}},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner"),n=t?t.getValue("pathAlias"):e;return"/photos/"+n+"/"}},urlSuffix:{readOnly:!0,defaultFn:function(e){return"photostream"}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getContext-fetcher","flickr-people-getPhotos-fetcher"]});
YUI.add("flickr-photos-getContext-fetcher",function(e){"use strict";function t(t,n){var r={photo_id:t.photoId,num_prev:t.numNext,num_next:t.numPrev,extras:e.APIHelper.request.getStandardExtras()};return r}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a=[],f=s.proxy(n.photoId),l=f.getValue("owner"),c,h,p,d,v,m,g=[];return c=r.prevphotos,h=r.nextphotos,a=e.APIHelper.response.parsePhotos({photos:c.photo,existingPerson:l,photoModelRegistry:s}),u=e.APIHelper.response.parsePhotos({photos:h.photo,existingPerson:l,photoModelRegistry:s}),d=i.getValue(n.id,"photoContextList"),v=d.hasMinBoundary?d.hasMinBoundary():!1,m=d.hasMaxBoundary?d.hasMaxBoundary():!1,p=d.getList(),g=e.APIHelper.response.addOrReplaceListByContext({model:f,next:a,prev:u.reverse(),hasMin:v,hasMax:m,current:p,numNext:n.numNext,numPrev:n.numPrev}),c.photo.concat(h.photo).forEach(function(e){o.exists(e.id)||o.add({id:e.id,ownerNsid:e.owner,isFaved:e.isfavorite||!1,canShare:e.canShare,canDownload:e.canDownload,commentCount:e.countComments,faveCount:e.countFaves})}),i.setValue(n.id,"photoContextList",g),{next:a,previous:u.reverse()}}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.photos.getContext",this._processParams(t,n)),n.getModelRegistry("photostream-models"),n.getModelRegistry("photo-models"),n.getModelRegistry("photo-engagement-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photos-getContext-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photos-getContext"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photostream-models","photo-models"]});
YUI.add("flickr-people-getPhotos-fetcher",function(e){"use strict";function t(t){var n={user_id:t.id,per_page:t.perPage||20,page:t.page||1,extras:e.APIHelper.request.getStandardExtras(),get_user_info:1};return n}function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=[],a,f=!1,l=!1,c,h={id:n.id};return h.owner=e.APIHelper.response.parsePerson(r.user),s.exists(h.owner.id)||s.add(h.owner),h.owner=s.proxy(h.owner.id),o.exists(h.id)&&(a=o.getValue(n.id,"photoPageList"),f=a.hasMinBoundary?a.hasMinBoundary():!1,l=a.hasMaxBoundary?a.hasMaxBoundary():!1,u=a.getList()),c=e.APIHelper.response.parsePhotos({photos:r.photos.photo,ownerID:r.photos.owner,personModelRegistry:s,photoModelRegistry:i}),h.photoPageList=e.APIHelper.response.addOrReplaceListByPage({current:u,perPage:n.perPage,pageNum:n.page,hasMax:l,hasMin:f,totalItems:r.photos.total,newPages:c}),o.exists(h.id)?o.setValue(h.id,"photoPageList",h.photoPageList):o.add(h),c}function r(t,n){var r=this;return e.batch(n.callAPI("flickr.people.getPhotos",this._processParams(t)),n.getModelRegistry("photo-models"),n.getModelRegistry("person-models"),n.getModelRegistry("photostream-models")).then(function(e){return r._processResponse(e,t)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-people-getPhotos-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-people-getPhotos"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models","person-models","photostream-models"]});
/*
YUI 3.10.2 (build f282c77)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.10.2",{requires:["base-base","pluginhost"]});
YUI.add("flickr-view",function(e){e.FlickrView=e.Base.create("flickrView",e.Base,[],{viewState:null,subviews:{},subviewConfig:null,_eventHandles:null,initializer:function(t){return this.appContext=t.appContext,delete t.appContext,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.set("headContainer",""),this.isBuilt=!1,this.isActivated=!1,this._params=t||{},this.subviews={},this._eventHandles=[],this.destroy!==e.FlickrView.prototype.destroy&&this.appContext.warn("[flickr-view] ["+this.name+"] `destroy` method was overridden. Did you mean `destructor`?"),this.initialize!==e.FlickrView.prototype.initialize&&this.appContext.warn("[flickr-view] ["+this.name+"] `initialize` method was overridden. Did you mean `initializer`?"),this},initialize:function(e){var t=this;return this.serverRendered=e&&e.serverRendered?e.serverRendered:!1,YUI.Env.isServer||this.registerEventHandler(this.appContext.flapp.after("activeViewChange",function(e){t.updateHead(),t.canActivate()&&(t.activate(),t.activateSubviews(),t.isActivated=!0)})),this.setupSubviews().then(function(){var e=t.loadState();if(!e)throw new Error("View "+t.name+" loadState function does not return a promise");return e},function(e){throw e}).then(function(){(YUI.Env.isServer||!t.get("container").hasClass("requiredToShowOnServer"))&&t.buildContainer(),t.isBuilt=!0}).then(function(){return t.buildHeadContainer(),YUI.Env.isServer||(t.updateHead(),t.canActivate()&&(t.activate(),t.activateSubviews(),t.isActivated=!0)),t})},render:function(){return this},buildHeadContainer:function(){return this},setContainerHTML:function(e){var t=this;return this.get("container").setHTML(e),YUI.Env.isServer||Object.keys(this.subviews).forEach(function(e,n,r){var i=t.subviews[e].get("container"),s=t.get("container").one("#"+i._yuid);s&&s.replace(i)}),this},setupSubviews:function(){var t=this,n,r=[],i,s={};return this.subviewConfig?(Object.keys(this.subviewConfig).forEach(function(e){if(typeof t.subviewConfig[e].disabled=="undefined"||(typeof t.subviewConfig[e].disabled=="function"?!t.subviewConfig[e].disabled.call(t):!t.subviewConfig[e].disabled))s[e]=t.subviewConfig[e]}),n=Object.keys(s).map(function(n){YUI.Env.isServer?i=s[n].requiredToShowOnServer||s[n].requiredToShow:i=s[n].requiredToShowOnClient||s[n].requiredToShow;var o=e.merge(t._params,s[n]);i?r.push(t.instantiateSubview(n,o).then(function(e){return t.setupSubview(n,o,e)})):r.push(t.instantiateSubview(n,o).then(function(e){YUI.Env.isServer||t.setupSubview(n,o,e)}))}).filter(function(e){return!!e}),r.length?e.batch.apply(this,r):new e.AutoResolvingPromise):new e.AutoResolvingPromise},instantiateSubview:function(e,t){var n=this;return t.container=this.getContainer({subviewName:e,subviewParams:t}),this.appContext.getView(e,t).then(function(t){return n.subviews[e]=t,t})},setupSubview:function(t,n,r){var i=this;return n=e.merge(n||{}),n.alreadyRendered=i.alreadyRendered,r.initialize(n).then(function(){return i.subviews[t]},function(e){if(n.requiredToShowOnServer||n.requiredToShowOnClient)throw e;i.appContext.error("Error getting/initializing view ",t," of ",i.name,e.message,e.stack),i.appContext.error(e.message),i.appContext.error(e.stack)})},attachEvents:function(e){if(!e)return;var t={},n=this;Object.keys(e).forEach(function(r){var i,s;i={selector:(r.match(/([\w-_\#\.\[\]~|$^*= ]+) /i)||[])[1]||"[data-action]",type:(r.match(/([\w]+):/i)||[])[1]||"click",action:(r.match(/:([\w]+)/i)||[])[1]||"_default_"},s=i.selector+"/"+i.type,t[s]||(t[s]={},n.registerEventHandler(n.get("container").delegate(i.type,function(e){var r,o,u,a;r=e.target.ancestor(i.selector,!0),o=e.target.ancestor(".server-only-link",!0);if(o){window.location=o.get("href");return}if(!r)return;u=r.getData()||{},a=u.action||"_default_";if(!t[s].hasOwnProperty(a))return;if(!t[s][a])throw new Error('Handler for "'+a+'" UI event is undefined');t[s][a].call(n,e,u)},i.selector))),t[s][i.action]=e[r]})},registerEventHandler:function(t){e.Lang.isFunction(t.detach)&&this._eventHandles.push(t)},detachRegisteredEvents:function(){this._eventHandles.length&&(this._eventHandles.forEach(function(e){e.detach()}),this._eventHandles=[])},generateSignature:function(t,n){var r={},i;return e.Object.each(n,function(e,t){t!=="container"&&t!=="appContext"&&t!=="context"&&t!=="parentView"&&typeof e!="function"&&(r[t]=e)}),i=t+"__"+Object.keys(r).sort().map(function(e){return encodeURIComponent(e)+"_"+encodeURIComponent(r[e])}).join("__"),i},getContainer:function(t){t=t||{},t.subviewParams=t.subviewParams||{};var n,r,i=["view",t.subviewName||this.name],s=t.subviewName?t.subviewParams.additionalViewClasses:this.additionalViewClasses,o,u=t.subviewParams.preferredViewTag||"div";return(t.subviewParams.requiredToShowOnServer||t.subviewParams.requiredToShow)&&YUI.Env.isServer&&i.push("requiredToShowOnServer"),e.Lang.isArray(s)&&s.length?i=i.concat(s):e.Lang.isFunction(s)&&(o=s.call(this),e.Lang.isArray(o)&&o.length&&(i=i.concat(o))),i=' class="'+i.join(" ")+'"',t.subviewName&&t.subviewParams&&(n=this.generateSignature(t.subviewName,t.subviewParams)),YUI.Env.isServer?r={html:"",setHTML:function(e){this.html=e},getHTML:function(e){return this.html},get:function(e){if(e==="outerHTML")return"<"+u+" "+i+(n?' data-view-signature="'+n+'"':"")+">"+this.html+"</"+u+">"},addClass:function(e){i=i.slice(0,-1)+" "+e+'"'}}:(n&&(r=this.get("container").one('[data-view-signature="'+n+'"]')),r?r.removeAttribute("data-view-signature"):r=e.Node.create("<"+u+" "+i+"></"+u+">")),r},renderSubviews:function(){var e={},t=this;return Object.keys(this.subviews).forEach(function(e,n,r){try{t.subviews[e].render()}catch(i){t.appContext.error("Error rendering view",e,"of",t.name,i.message,i.stack)}}),e},templates:function(t){var n=e.Template._cache["hermes/"+t];return typeof n!="function"&&this.appContext.error("Template not found:",t),n},loadState:function(){return new e.AutoResolvingPromise},updateHead:function(){this.get("headContainer")&&this.get("headContainer").trim()!==""&&(e.one("head"
).all('[data-dynamic="true"]').remove(!0),e.one("head").append(this.get("headContainer")))},canActivate:function(){var e=!1;return this.isBuilt&&(this.isActivated||this.isActiveAndInDOM()&&(e=!0)),e},isActiveAndInDOM:function(){var e=this.get("container");return e&&this.appContext.flapp.get("activeView").get("container").contains(e)&&e.inDoc()},activate:function(){return this},activateSubviews:function(){var e,t=this;for(e in this.subviews)try{t.subviews[e].canActivate()&&(t.subviews[e].activate(),t.subviews[e].isActivated=!0)}catch(n){this.appContext.error("Error activating view ",e," of ",this.name,n.message,n.stack)}return this},recursivelyActivateSubviews:function(e){var t,n=e||this.subviews,r=this;for(t in n)if(n[t].isBuilt)try{n[t].activate(),r.recursivelyActivateSubviews(n[t].subviews)}catch(i){this.appContext.error("Error activating view ",t," of ",this.name,i.message,i.trace)}return this},getTrackingSegments:function(){return{}},destroy:function(t){this.set("destroyed",!0);var n=this.get("container");return this.detachRegisteredEvents(),e.Node&&n&&(n.detach&&n.detach(),t&&(t.remove||t.delete)&&n.remove&&n.remove(!0),this.set("container",null)),this.destroySubviews(),e.FlickrView.superclass.destroy.call(this)},beforeDestroy:function(){var e=this;Object.keys(this.subviews).forEach(function(t,n,r){e.subviews[t].beforeDestroy()})},destroySubviews:function(){var e=this;Object.keys(this.subviews).forEach(function(t,n,r){e.subviews[t].destroy()})}},{ATTRS:{container:{value:"",setter:function(e){return e||this.getContainer()}},spaceid:{value:792600503,validator:function(t){return e.Lang.isNumber(t)||e.Lang.isString(t)},setter:function(e){return parseInt(e,10)}},trackedElementIDs:{value:[],validator:function(t){return e.Lang.isArray(t)}}}})},"@VERSION@",{requires:["base","flickr-promise","handlebars-helpers"]});
YUI.add("hermes-templates-photo-page",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return u={hash:{},data:i},s+=f((o=n.outlet,o?o.call(t,t["global-nav-view"],u):a.call(t,"outlet",t["global-nav-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet,o?o.call(t,t["photo-well-view"],u):a.call(t,"outlet",t["photo-well-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet,o?o.call(t,t["sidebar-view"],u):a.call(t,"outlet",t["sidebar-view"],u))),s}),r=e.Template._cache=e.Template._cache||{},i={};e.Array.each([],function(e){r["hermes/"+e]&&(i[e]=r["hermes/"+e])}),r["hermes/photo-page"]=function(e){return n(e,{partials:i})}},"@VERSION@",{requires:["handlebars-base"]});
YUI.add("signin-helper",function(e){function t(t,n){e.FlickrStorage.store(t,n)}function n(e){var n="fave";t(n,e),a(n)}function r(e){var t="comment";a(t)}function i(e){var n="share";t(n,e),a(n)}function s(t){var n,r,i=[];if(!t)return;if(e.FlickrStorage.hasEntries()){n=e.FlickrStorage.retrieve();for(r in n)o(t,n[r])||i.push(n[r])}return e.FlickrStorage.remove(),i}function o(e,t){var n=t.key,r=t.value;switch(n){case"fave":return u(e,r),!0;case"share":return!1}}function u(e,t){var n=t.id,r=e.getModelRegistry("photo-engagement-models");r.then(function(e){var t=e.proxy(n);t.registry.addAsFave(n)&&t.remoteUpdate()})}function a(t,n){var r=e.config.win.location.href;n=n||"http://www.flickr.com/signin/yahoo/",e.config.win.location=n+"?redir="+encodeURIComponent(r)}e.FlickrStorage={_storageKey:"flickrStorage",store:function(e,t){try{var n=[];localStorage[this._storageKey]&&(n=this.retrieve()),n.push({key:e,value:t}),localStorage[this._storageKey]=JSON.stringify(n)}catch(r){}},retrieve:function(){var e={};try{e=JSON.parse(localStorage[this._storageKey])}catch(t){}return e},remove:function(){try{localStorage.removeItem(this._storageKey)}catch(e){}},hasEntries:function(){var e=!1;try{e=typeof localStorage[this._storageKey]!="undefined"}catch(t){}return e}},e.SigninHelper={savePreLoginAction:t,addPendingFave:n,addPendingComment:r,addPendingShare:i,checkPendingQueue:s,_redirectToSignin:a}},"@VERSION@");
YUI.add("hermes-templates-dialog-tooltip",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){return" ui-dialog-tooltip-witharrow"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-tooltip',u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.arrow),{hash:{},inverse:f.noop,fn:f.program(1,h,i),data:i});if(u||u===0)s+=u;return s+='" data-action="halt">\n	<span class="ui-dialog-arrow"></span>\n	<div class="ui-dialog-body">\n	',a={hash:{},data:i},s+=c((o=n.dialogOutlet,o?o.call(t,t.content,a):l.call(t,"dialogOutlet",t.content,a)))+"\n	</div>\n</div>\n",s}),r=e.Template._cache=e.Template._cache||{},i={};e.Array.each([],function(e){r["hermes/"+e]&&(i[e]=r["hermes/"+e])}),r["hermes/dialog-tooltip"]=function(e){return n(e,{partials:i})}},"@VERSION@",{requires:["handlebars-base"]});
YUI.add("hermes-templates-dialog-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-modal">\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=f((o=n.dialogOutlet,o?o.call(t,t.content,u):a.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r=e.Template._cache=e.Template._cache||{},i={};e.Array.each([],function(e){r["hermes/"+e]&&(i[e]=r["hermes/"+e])}),r["hermes/dialog-modal"]=function(e){return n(e,{partials:i})}},"@VERSION@",{requires:["handlebars-base"]});
YUI.add("hermes-templates-dialog-alert",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-alert">\n	<div class="ui-dialog-gutter ui-dialog-alert-icon-'+f((o=(o=t.attrs,o==null||o===!1?o:o.level),typeof o===a?o.apply(t):o))+'" data-action="dismiss"></div>\n	<div class="ui-dialog-body" data-action="dismiss">\n		',u={hash:{},data:i},s+=f((o=n.dialogOutlet,o?o.call(t,t.content,u):l.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r=e.Template._cache=e.Template._cache||{},i={};e.Array.each([],function(e){r["hermes/"+e]&&(i[e]=r["hermes/"+e])}),r["hermes/dialog-alert"]=function(e){return n(e,{partials:i})}},"@VERSION@",{requires:["handlebars-base"]});
YUI.add("hermes-templates-dialog-cta",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return"ui-buttonbar-vertical"}function d(e,t){var n="",r;return n+='\n				<button class="ui-button ui-button-cta" data-action="confirm"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.confirmButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}function v(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.buttonMarkup,{hash:{},inverse:c.program(8,g,t),fn:c.program(6,m,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function m(e,t){var n="",r;return n+="\n					"+l((r=e.buttonMarkup,typeof r===f?r.apply(e):r))+"\n				",n}function g(e,t){var r="",i;r+='\n					<button class="ui-button" ',i=n["if"].call(e,e.buttonAction,{hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t});if(i||i===0)r+=i;return r+="><span>"+l((i=e.buttonLabel,typeof i===f?i.apply(e):i))+"</span></button>\n				",r}function y(e,t){var n="",r;return n+='data-action="'+l((r=e.buttonAction,typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+='\n				<button class="ui-button" data-action="decline"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.cancelButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-cta">\n	<h1 class="ui-dialog-title">'+l((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===f?o.apply(t):o))+'</h1>\n	<div class="ui-dialog-body">\n		<div class="ui-util-paragraph">\n			',a={hash:{},data:i},s+=l((o=n.dialogOutlet,o?o.call(t,t.content,a):h.call(t,"dialogOutlet",t.content,a)))+'\n		</div>\n		<div class="ui-buttonbar ',u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.verticalButtonList),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n.unless.call(t,(o=t.attrs,o==null||o===!1?o:o.hideConfirmButton),{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n.each.call(t,(o=t.attrs,o==null||o===!1?o:o.additionalButtons),{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.useCancelButton),{hash:{},inverse:c.noop,fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n\n",s}),r=e.Template._cache=e.Template._cache||{},i={};e.Array.each([],function(e){r["hermes/"+e]&&(i[e]=r["hermes/"+e])}),r["hermes/dialog-cta"]=function(e){return n(e,{partials:i})}},"@VERSION@",{requires:["handlebars-base"]});
YUI.add("dialog",function(e){"use strict";var t,n,r={},i=e.config.win,s=e.config.doc;t={css:{state:"c-state-{{state}}",hidden:"ui-util-hidden",loading:"ui-util-loading",working:"ui-util-working",locked:"ui-util-locked",complete:"ui-util-complete",removed:"ui-util-removed",content:"js-content",wrapper:"ui-dialog-wrapper",anchorSelected:"ui-util-selected",curtain:"ui-dialog-modal-curtain",curtainClear:"ui-dialog-modal-curtain-clear",arrow:"ui-dialog-arrow"},transitionTimeout:2e3,debug:!1},n=e.merge(e.flutil,{log:function(){if(!t.debug||!console.log.apply)return;var e=[].slice.call(arguments);e.unshift("DIALOG"),n.dump.apply(null,e)},propagateWrapperAttributes:function(e,n){var r=[],i;return n?(Array.prototype.slice.call(n.getDOMNode().classList).forEach(function(i){if(i===t.css.wrapper)return;n.removeClass(i),e.addClass(i),r.push(i)}),i=n.getAttribute("data-action"),i&&(n.removeAttribute("data-action"),r.push({attr:"data-action",restore:e.getAttribute("data-action")||null}),e.setAttribute("data-action",i)),r):r},rollbackWrapperAttributes:function(e,t){if(!t)return;for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"?t[1].restore?e.setAttribute(t[n].name,t[n].restore):e.removeAttribute(t[n].name):e.removeClass(t[n])}}),e.namespace("Views").dialog={_dialogs:{},getInstance:function(t,r){var i,s,o;return r.id?s={id:r.id}:(s=e.merge(r),delete s.parent,delete s.rootEl,delete s.template,typeof s.content=="object"&&s.content instanceof e.FlickrView?s.content=s.content.get("container").toString():typeof s.content=="function"?s.content=s.content({}):s.content.toString()),i="SGL"+n.createHashCode(s),o=this._dialogs[t+":"+i],o?o:this._new(t,i,r)},getNewInstance:function(e,t){var n="OBJ"+(Object.keys(this._dialogs).length+1)+(new Date).getTime();return this._new(e,n,t)},_new:function(t,n,i){var s,o,u,a,f;if(e.Env.isServer)throw new Error("Dialogs are client-only!");i=e.mix(i||{});if(i.parent)o=i.parent,delete i.parent,a=o.getContainer({subviewName:t,subviewParams:i}),u=o.appContext;else{if(!i.appContext)throw new Error('Either the "appContext" or "parent" parameter is required!');o=null,u=i.appContext,a=e.Node.create("<div/>"),a.addClass("view").addClass(t)}return i.appContext=u,i.container=a,s=new r[t](i),f=t+(n?":"+n:""),this.registerView(s,f),this._navigateCloseHook||(this._navigateCloseHook=u.flapp.on("navigate",this.close.bind(this))),s},registerView:function(e,t){var n=this;t=t||"REG"+(Object.keys(this._dialogs).length+1),e.manager=this,this._dialogs[t]=e,e.on("destroy",function(){delete n._dialogs[t]})},hide:function(e){this.close(e,"hide")},close:function(e,t){var n=this,r;t=t||"close",typeof e=="string"?r=function(r){if(e!==r.split(/:/)[0])return;n._dialogs[r][t]()}:typeof e=="object"?r=function(r){if(e===n._dialogs[r])return;n._dialogs[r][t]()}:r=function(e){n._dialogs[e][t]()},Object.keys(this._dialogs).forEach(r)},isOpen:function(e){},util:n},e.namespace("Views").dialogs=r,r["dialog-base"]=e.Base.create("dialog-base",e.FlickrView,[],{initializer:function(e){return e=e||{},this.state={},this.manager=null,this},render:function(){var n=this.templates(this.get("template"))(this.toJSON());return this.setContainerHTML(n),e.namespace("Views").dialog.util.propagateWrapperAttributes(this.get("container"),this.get("container").one("."+t.css.wrapper)),this.renderContent(),this.activate(),this.get("container").addClass(t.css.hidden),this.anchorToLayout(),this.state.visible=!0,this.hide(),this.state.rendered=!0,this.fire("rendered"),this},renderContent:function(){var r=this.get("content"),i=this.get("container"),s=i.one("."+t.css.content);e.namespace("Views").dialog.util.rollbackWrapperAttributes(this.get("container"),this._contWrap);if(r instanceof e.FlickrView){r=r.get("container");if(!r)throw new Error("The Content View doesn't have a container");s.setHTML(""),s.appendChild(r)}else r instanceof e.Node?(s.setHTML(""),s.appendChild(r)):typeof r=="function"?(r=r(this.toJSON()),s.setHTML(r)):typeof r=="string"&&this.state.rendered&&s.setHTML(r);this._contWrap=n.propagateWrapperAttributes(i,s.one("."+t.css.wrapper))},renderCurtain:function(){var n=this,r;this.get("curtain")||(r=e.Node.create("<div/>"),r.addClass(t.css.curtain).addClass(t.css.hidden),this.get("visibleShim")||r.addClass(t.css.curtainClear),r.on("click",this.dismiss,this),this.set("curtain",r),this.get("appendCurtainTo")?this.get("appendCurtainTo").appendChild(r):this.get("container").ancestor().insert(r,"after")),n.get("curtain").removeClass(t.css.hidden)},anchorToLayout:function(){var e=this.get("container"),t=this.get("anchorTo");(this.get("appendTo")||t||this.get("rootEl")).appendChild(e),this.get("positioning")&&this.refreshPosition()},refreshPosition:function(){var n,r,s,o,u,a,f,l,c=this.get("container"),h=this.get("anchorTo"),p;o=c.getDOMNode().getBoundingClientRect(),this.set("width",o.width),this.set("height",o.height),c.getComputedStyle("position")==="fixed"&&c.setStyles({marginLeft:(-1*o.width/2|0)+"px",marginTop:(-1*o.height/2|0)+"px",width:o.width+"px",height:o.height+"px"});if(h){n=h.getDOMNode().getBoundingClientRect(),this.set("anchorWidth",n.width),this.set("anchorHeight",n.height),l={width:i.innerWidth,height:i.innerHeight},u=[[n.bottom+o.height<l.height&&n.right+o.width<l.width,{left:0,top:n.height},"topleft"],[n.bottom+o.height<l.height&&n.left-o.width>0,{right:0,top:n.height},"topright"],[n.top>o.height&&n.right+o.width<l.width,{left:0,bottom:n.height},"bottomleft"],[n.top>o.height&&n.left-o.width>0,{right:0,bottom:n.height},"bottomright"],[!0,{left:-1*o.width/2|0,top:0}]];while(u.length){f=u.shift();if(f[0]){a=f[1],c.addClass("ui-dialog-tooltip-witharrow-"+f[2]),c.setStyles(e.mix({top:"auto",bottom:"auto",left:"auto",right:"auto"},a,!0));break}}p=c.one("."+t.css.arrow),p&&(r=20,s=Math.round((n.width-r)/2)+"px",p.setStyles({right:a.right===undefined?"auto":s,left:a.left===undefined?"auto":s}))}},activate:function(){var e={":confirm":this.confirm,":decline":this.decline,":dismiss":this.dismiss,":halt":function(e){e.halt()}
};return this.attachEvents(e),this},toJSON:function(){var t=this.getAttrs();return Object.keys(t).reduce(function(n,r){var i=t[r];return i instanceof e.Node?n:i instanceof e.FlickrView?n:(i&&i.toJSON&&(i=i.toJSON()),n[r]=i,n)},{})},isVisible:function(){return!!this.state.visible},isLocked:function(){return!!this.state.locked},isWorking:function(){return!!this.state.working},show:function(e){var r=this,i=this.get("container"),s=this.get("anchorTo");this.switchToLoading(!1);if(this.state.visible)return;this.state.rendered||this.render(),r.state.visible=!0,this.fire("show"),i.removeClass(t.css.removed),setTimeout(function(){n.onTransitionEnd(i,e),i.removeClass(t.css.hidden),s&&s.addClass(t.css.anchorSelected)},10)},handleError:function(e){return function(t){console.error(e,!t.toString||t.toString().match(/^\[object/)?t:t.toString())}},close:function(e){if(this._destroyed)return;var t=this;this.fire("close"),this.hide(function(){t.destroy(),e&&e()})},destroy:function(){var t=this.get("container");t.detach(),t.remove(),this.set("container",null),this.set("content",null),this.set("appendTo",null),this.set("anchorTo",null),this.set("rootEl",null),this.manager=null,e.FlickrView.prototype.destroy.call(this),this._destroyed=!0,this.fire("destroy")},hide:function(r){if(!this.state.visible)return;var i=this,s=this.get("container"),o=this.get("anchorTo"),u=this.get("curtain"),a=!this.state.rendered;this.state.visible=!1,o&&o.removeClass(t.css.anchorSelected),u?(this.set("curtain",null),u.detach(),n.onTransitionEnd(u,function(){u.remove()}),u.addClass(t.css.hidden)):s.addClass(t.css.removed),e.namespace("Views").dialog.util.onTransitionEnd(s,function(){a||i.fire("hide"),i.state.visible||s.addClass(t.css.removed),r&&r()}),s.addClass(t.css.hidden)},toggle:function(e){this[this.state.visible?"hide":"show"](e),this.fire("toggle",this.state.visible)},switchToLoading:function(e){this.switchToUIState("loading",e)},switchToComplete:function(e){this.switchToUIState("complete",e)},switchToLocked:function(e){this.switchToUIState("locked",e)},switchToWorking:function(e){this.switchToUIState("working",e)},switchToUIState:function(e,n){var r;n=n===!1?!1:!0;if(this.state[e]===n)return;n&&this.show(),this.state[e]=n,r=t.css[e]||t.css.state.replace(/\{\{state\}\}/,e),this.get("container")[n?"addClass":"removeClass"](r)},confirm:function(t,n){t.halt(),this.fire("confirm",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("CONFIRM")},decline:function(t,n){t.halt(),this.fire("decline",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("DECLINE")},dismiss:function(t,n){if(this.isWorking()||!this.get("hideOnCurtainClick"))if(t.target===this.get("curtain"))return;t.halt(),this.fire("dismiss",n),this.hide(),e.namespace("Views").dialog.util.log("DISMISS")}},{ATTRS:{template:{value:"dialog"},anchorTo:{value:null},appendTo:{value:null},appendCurtainTo:{value:null},rootEl:{value:e.Node&&e.one(s&&s.body)},content:{value:null},attrs:{value:{}},stack:{value:!1},hideOnButtonClick:{value:!0},hideOnCurtainClick:{value:!0},visibleShim:{value:!0},positioning:{value:!0}}}),r["dialog-tooltip"]=e.Base.create("dialog-tooltip",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-tooltip"},visibleShim:{value:!1}}}),r["dialog-modal"]=e.Base.create("dialog-modal",r["dialog-base"],[],{anchorToLayout:function(){this.set("anchorTo",null),r["dialog-base"].prototype.anchorToLayout.apply(this,arguments)},show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-modal"}}}),r["dialog-alert"]=e.Base.create("dialog-alert",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-alert"},visibleShim:{value:!1}}}),r["dialog-cta"]=e.Base.create("dialog-cta",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()},hide:function(){this.get("curtain")&&(this.get("curtain").remove(),this.set("curtain",null)),r["dialog-base"].prototype.hide.apply(this,arguments)}},{ATTRS:{template:{value:"dialog-cta"},visibleShim:{value:!1}}}),r["dialog-progress"]=e.Base.create("dialog-progress",r["dialog-base"],[],{},{ATTRS:{template:{value:"dialog-progress"}}}),e.Handlebars.registerHelper("dialogOutlet",function(n){var r=['<div class="'+t.css.content+'">'];return n instanceof e.FlickrView||n instanceof e.Node?r.push("<!--"+(n.name||"DOM-node")+"-->"):r.push((n||"")+""),r.push("</div>"),new e.Handlebars.SafeString(r.join(""))})},"@VERSION@",{requires:["flickr-view","handlebars-base","flutil","hermes-templates-dialog-tooltip","hermes-templates-dialog-modal","hermes-templates-dialog-alert","hermes-templates-dialog-cta","flickrui-css"]});
YUI.add("flutil",function(e){"use strict";var t,n=e.config.win,r=e.config.doc,i={transitionTimeout:2e3};t=e.flutil={xbrowser:{transition:function(){var e,t,i,s;e={cssPropName:null,transitionendEventName:null};if(!r)return e;t=[["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"],["MSTransition","msTransitionEnd"],["transition","transitionEnd"]],s=n.getComputedStyle(r.createElement("div"));while(t.length){i=t.shift();if(s[i[0]]!==undefined)return e.cssPropName=i[0],e.transitionendEventName=i[1],e}return e}()},dump:function(){var e=[].slice.call(arguments),t=typeof e[0]=="string"?e.shift():"LOG";e.unshift("color: #FC0"),e.unshift("%c["+t+"]"),console.log.apply(console,e)},onTransitionEnd:function(e,r){if(!r)return;var s,o,u;e=e.getDOMNode(),u=n.getComputedStyle(e)[t.xbrowser.transition.cssPropName];if(!u||u.match(/none/))return r();o=function(){clearTimeout(s),e.removeEventListener(t.xbrowser.transition.transitionendEventName,o),r()},s=setTimeout(o,i.transitionTimeout),e.addEventListener(t.xbrowser.transition.transitionendEventName,o)},toCamelCase:function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},createFragment:function(e){var t=r.createElement("div"),n=r.createDocumentFragment(),i;t.innerHTML=e;while(i=t.firstChild)n.appendChild(i);return n},constrainToValues:function(e,t){return t.indexOf(e)<0?t[0]:e},escapeInput:function(e,t){var n;if(!r)return e;if(!e&&typeof e!="number")return"";t||(t="text");if(t==="html")return n=r.createElement("div"),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="text")return n=r.createElement("div"),e=e.replace(/(<([^>]+)>\s*)+/ig," ").trim(),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="numericstring")return(e+"").replace(/[^\d]/,"")},template:function(e,t){return e.replace(/\{\{([\w\.=]+)\}\}/g,function(e,n){var r=n.split(/=/),i;return i=r[0].split(/\./).reduce(function(e,t){return e?e[t]:null},t),i!==undefined&&i!==null?i+"":r[1]||""}).trim()},getOopsAlert:function(t){return e.Views.dialog.getInstance("dialog-alert",{content:"Something went wrong.<br>Please refresh your browser and try again.",attrs:{level:"warning"},appContext:t})},createHashCode:function(e){var t,n="0000000000";return typeof e!="object"?t=e+"":t=Object.keys(e||{}).map(function(t){var n=t;try{n+=JSON.stringify(e[t])}catch(r){n+="?"}return n}).join(""),t=t.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0).toString().replace(/^-/,""),n.slice(0,-1*t.length)+t},buildHttpQuery:function(e,t){return e+"?"+Object.keys(t||{}).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},openPopupWindow:function(t,n){var r,i,s,o,u,a;if(typeof window=="undefined")return;i=window,n=e.mix({name:"WIN"+(new Date).getTime(),ui:{}},n||{},!0),s=e.mix({dependent:!0,status:!0,scrollbars:!0,width:600,height:600},n.ui,!0),s.top||(s.top=(i.screen.height-s.height)/2|0),s.left||(s.left=(i.screen.width-s.width)/2|0),r=Object.keys(s).map(function(e){var t=s[e];return typeof t=="boolean"&&(t=t?"yes":"no"),e+"="+t}).join(","),i=i.open(t,n.name,r),i.focus();if(n.onUrlChange||n.onClose)o="_start_",a=setInterval(function(){if(!i.location){clearInterval(a),n.onClose&&n.onClose();return}u=i.location.href||"x-origin";if(u===o)return;o=u,n.onUrlChange&&n.onUrlChange(u)},1e3);return i}},t,typeof window!="undefined"&&(window.uuu=t)},"@VERSION@",{requires:["dialog"],optional:[]});
YUI.add("overflow-helper",function(e){function t(t){var n=0,r;return YUI.Env.isServer||(r=e.Node.create("<div></div>"),r.setStyle("width",100).setStyle("height",100).setStyle("overflow","scroll").setStyle("position","absolute").setStyle("top",-9999),t.append(r),n=r._node.offsetWidth-r._node.clientWidth,r.remove(!0)),n}function n(t,n){var r,i,s;YUI.Env.isServer||(r=e.Node.create("<div>test event</div>"),r.setStyle("height: 1px").setStyle("width","1px").setStyle("opacity",0).setStyle("position","absolute").setStyle("top",-99999).setStyle("left",-99999).setStyle("overflow","auto"),t.append(r),i=setTimeout(function(){r._node.removeEventListener("overflow",s),r.remove(!0),n(!1)},10),s=function(e){clearTimeout(i),r._node.removeEventListener("overflow",s),r.remove(!0),n(!0)},r._node.addEventListener("overflow",s,!1))}function r(e,t,r,i){var s=t==="over",o,u,a,f;"OverflowEvent"in window?(f=function(e){if(e.type===t+"flow"||e.orient===0&&e.horizontalOverflow===s||e.orient===1&&e.verticalOverflow===s||e.orient===2&&e.horizontalOverflow===s&&e.verticalOverflow===s)return r.call(this,e)},a=e._node.addEventListener("overflowchanged",f,!1),i({detach:function(){e._node.removeEventListener("overflowchanged",f)}})):n(e,function(n){n?(f=function(e){if(e.type===t+"flow"||e.orient===0&&e.horizontalOverflow===s||e.orient===1&&e.verticalOverflow===s||e.orient===2&&e.horizontalOverflow===s&&e.verticalOverflow===s)return r.call(this,e)},a=e._node.addEventListener(t+"flow",f,!1),i({detach:function(){e._node.removeEventListener(t+"flow",f)}})):(u=function(){e._node.scrollHeight>e._node.clientHeight?t==="over"&&r.call(e._node,{}):t==="under"&&r.call(e._node,{})},"MutationObserver"in window?(o=new MutationObserver(function(e){e.some(function(e){return u(),!0})}),o.observe(e._node,{attributes:!1,subtree:!0,childList:!0}),i({detach:function(){o.disconnect()}})):"MutationEvent"in window&&(f=function(e){setTimeout(function(){u()},10)},a=e._node.addEventListener("DOMSubtreeModified",f,!1),i({detach:function(){e._node.removeEventListener("DOMSubtreeModified",f)}})))})}e.OverflowHelper={detectScrollbarSize:t,addFlowListener:r}},"@VERSION@",{requires:[]});
YUI.add("hermes-templates-reboot-welcome-dialog-content",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function a(e,t){return"\n	While we continue to develop the beta experience, we want your feedback. In case you need some of the missing functionality, you can easily opt-out and go back to the old experience.\n"}function f(e,t){return"\n	Please continue providing us with feedback so we can continue to improve Flickr.\n"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,i=i||{};var s="",o,u=this;s+="Flickr is about the amazing photos you capture and the communities that you build around these photos. The goal of our photo page redesign is to provide you with a fast photo browsing experience and an easy interface to build &amp; maintain relationships.<br>\n<br>\nOver the last 4 weeks, we received a lot of feedback from the Flickr community regarding the photo page design. Based on the feedback, we are experimenting with different variations of the photo page to identify the best experience.<br>\n<br>\n",o=n["if"].call(t,t["opt-out-enabled"],{hash:{},inverse:u.program(3,f,i),fn:u.program(1,a,i),data:i});if(o||o===0)s+=o;return s+="\n<br>",s}),r=e.Template._cache=e.Template._cache||{},i={};e.Array.each([],function(e){r["hermes/"+e]&&(i[e]=r["hermes/"+e])}),r["hermes/reboot-welcome-dialog-content"]=function(e){return n(e,{partials:i})}},"@VERSION@",{requires:["handlebars-base"]});
